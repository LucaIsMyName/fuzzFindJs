{"version":3,"file":"fuzzyfindjs.min.js","sources":["../../src/core/config.ts","../../src/languages/base/LanguageProcessor.ts","../../src/languages/german/GermanProcessor.ts","../../src/languages/english/EnglishProcessor.ts","../../src/languages/spanish/SpanishProcessor.ts","../../src/languages/french/FrenchProcessor.ts","../../src/languages/index.ts","../../src/algorithms/levenshtein.ts","../../src/core/index.ts","../../src/index.ts"],"sourcesContent":["import type { FuzzyConfig, FuzzyFeature } from \"./types.js\";\n\n/**\n * Default configuration for FuzzyFindJS\n * Provides sensible defaults that work out of the box\n */\nexport const DEFAULT_CONFIG: FuzzyConfig = {\n  languages: [\"english\"],\n  features: [\"phonetic\", \"compound\", \"synonyms\", \"keyboard-neighbors\", \"partial-words\", \"missing-letters\", \"extra-letters\", \"transpositions\"],\n  performance: \"balanced\",\n  maxResults: 10,\n  minQueryLength: 2,\n  fuzzyThreshold: 0.75,\n  maxEditDistance: 2,\n  ngramSize: 3,\n};\n\n/**\n * Performance-optimized configurations\n */\nexport const PERFORMANCE_CONFIGS: Record<string, Partial<FuzzyConfig>> = {\n  fast: {\n    performance: \"fast\",\n    features: [\"partial-words\", \"missing-letters\"],\n    maxEditDistance: 1,\n    fuzzyThreshold: 0.9,\n    maxResults: 3,\n  },\n  balanced: {\n    performance: \"balanced\",\n    features: [\"phonetic\", \"partial-words\", \"missing-letters\", \"keyboard-neighbors\"],\n    maxEditDistance: 2,\n    fuzzyThreshold: 0.8,\n    maxResults: 5,\n  },\n  comprehensive: {\n    performance: \"comprehensive\",\n    features: [\"phonetic\", \"compound\", \"synonyms\", \"keyboard-neighbors\", \"partial-words\", \"missing-letters\", \"extra-letters\", \"transpositions\"],\n    maxEditDistance: 3,\n    fuzzyThreshold: 0.7,\n    maxResults: 10,\n  },\n};\n\n/**\n * Language-specific feature recommendations\n */\nexport const LANGUAGE_FEATURES: Record<string, FuzzyFeature[]> = {\n  german: [\n    //\n    \"phonetic\",\n    \"compound\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"extra-letters\",\n  ],\n  english: [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"transpositions\",\n  ],\n  spanish: [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n  ],\n  french: [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n  ],\n};\n\n/**\n * Merge user configuration with defaults\n */\nexport function mergeConfig(userConfig: Partial<FuzzyConfig> = {}): FuzzyConfig {\n  const baseConfig = { ...DEFAULT_CONFIG };\n\n  // Apply performance preset if specified\n  if (userConfig.performance && userConfig.performance !== \"balanced\") {\n    const performanceConfig = PERFORMANCE_CONFIGS[userConfig.performance];\n    Object.assign(baseConfig, performanceConfig);\n  }\n\n  // Apply user overrides\n  const mergedConfig = { ...baseConfig, ...userConfig };\n\n  // Auto-adjust features based on languages if not explicitly set\n  if (!userConfig.features && userConfig.languages) {\n    const recommendedFeatures = new Set<FuzzyFeature>();\n\n    for (const lang of userConfig.languages) {\n      const langFeatures = LANGUAGE_FEATURES[lang] || LANGUAGE_FEATURES.english;\n      langFeatures.forEach((feature) => recommendedFeatures.add(feature));\n    }\n\n    mergedConfig.features = Array.from(recommendedFeatures);\n  }\n\n  return mergedConfig;\n}\n\n/**\n * Validate configuration\n */\nexport function validateConfig(config: FuzzyConfig): void {\n  if (config.maxResults < 1) {\n    throw new Error(\"maxResults must be at least 1\");\n  }\n\n  if (config.minQueryLength < 1) {\n    throw new Error(\"minQueryLength must be at least 1\");\n  }\n\n  if (config.fuzzyThreshold < 0 || config.fuzzyThreshold > 1) {\n    throw new Error(\"fuzzyThreshold must be between 0 and 1\");\n  }\n\n  if (config.maxEditDistance < 0) {\n    throw new Error(\"maxEditDistance must be non-negative\");\n  }\n\n  if (config.ngramSize < 2) {\n    throw new Error(\"ngramSize must be at least 2\");\n  }\n\n  if (config.languages.length === 0) {\n    throw new Error(\"At least one language must be specified\");\n  }\n}\n","import type { LanguageProcessor, FuzzyFeature } from \"../../core/types.js\";\n\n/**\n * Abstract base class for language processors\n * Provides common functionality and enforces interface\n */\nexport abstract class BaseLanguageProcessor implements LanguageProcessor {\n  abstract readonly language: string;\n  abstract readonly displayName: string;\n  abstract readonly supportedFeatures: FuzzyFeature[];\n\n  /**\n   * Basic text normalization (override for language-specific behavior)\n   */\n  normalize(text: string): string {\n    return text.toLowerCase().trim().replace(/\\s+/g, \" \");\n  }\n\n  /**\n   * Default phonetic implementation (override for language-specific algorithms)\n   */\n  getPhoneticCode(word: string): string {\n    // Simple soundex-like algorithm as fallback\n    const normalized = this.normalize(word);\n    if (normalized.length === 0) return \"\";\n\n    let code = normalized[0].toUpperCase();\n    const consonantMap: Record<string, string> = {\n      b: \"1\",\n      f: \"1\",\n      p: \"1\",\n      v: \"1\",\n      c: \"2\",\n      g: \"2\",\n      j: \"2\",\n      k: \"2\",\n      q: \"2\",\n      s: \"2\",\n      x: \"2\",\n      z: \"2\",\n      d: \"3\",\n      t: \"3\",\n      l: \"4\",\n      m: \"5\",\n      n: \"5\",\n      r: \"6\",\n    };\n\n    for (let i = 1; i < normalized.length && code.length < 4; i++) {\n      const char = normalized[i];\n      const digit = consonantMap[char];\n      if (digit && digit !== code[code.length - 1]) {\n        code += digit;\n      }\n    }\n\n    return code.padEnd(4, \"0\");\n  }\n\n  /**\n   * Default compound word splitting (override for languages that support it)\n   */\n  splitCompoundWords(word: string): string[] {\n    return [word]; // No splitting by default\n  }\n\n  /**\n   * Generate common word variants\n   */\n  getWordVariants(word: string): string[] {\n    const variants = new Set<string>();\n    const normalized = this.normalize(word);\n\n    variants.add(normalized);\n    variants.add(word); // Original form\n\n    // Add variants without common endings\n    const commonEndings = this.getCommonEndings();\n    for (const ending of commonEndings) {\n      if (normalized.endsWith(ending) && normalized.length > ending.length + 2) {\n        variants.add(normalized.slice(0, -ending.length));\n      }\n    }\n\n    // Add partial variants for longer words\n    if (normalized.length > 4) {\n      for (let i = 3; i < normalized.length; i++) {\n        variants.add(normalized.slice(0, i));\n      }\n    }\n\n    return Array.from(variants);\n  }\n\n  /**\n   * Get common word endings for this language (override for language-specific endings)\n   */\n  protected getCommonEndings(): string[] {\n    return [\"s\", \"es\", \"ed\", \"ing\", \"er\", \"est\"];\n  }\n\n  /**\n   * Default synonym lookup (override to provide language-specific synonyms)\n   */\n  getSynonyms(_word: string): string[] {\n    return []; // No built-in synonyms by default\n  }\n\n  /**\n   * Check if two characters are keyboard neighbors\n   */\n  isValidSubstitution(char1: string, char2: string): boolean {\n    const keyboardNeighbors = this.getKeyboardNeighbors();\n    const neighbors = keyboardNeighbors[char1.toLowerCase()];\n    return neighbors ? neighbors.includes(char2.toLowerCase()) : false;\n  }\n\n  /**\n   * Get keyboard neighbor mappings (QWERTY layout by default)\n   */\n  protected getKeyboardNeighbors(): Record<string, string[]> {\n    return {\n      q: [\"w\", \"a\", \"s\"],\n      w: [\"q\", \"e\", \"a\", \"s\", \"d\"],\n      e: [\"w\", \"r\", \"s\", \"d\", \"f\"],\n      r: [\"e\", \"t\", \"d\", \"f\", \"g\"],\n      t: [\"r\", \"y\", \"f\", \"g\", \"h\"],\n      y: [\"t\", \"u\", \"g\", \"h\", \"j\"],\n      u: [\"y\", \"i\", \"h\", \"j\", \"k\"],\n      i: [\"u\", \"o\", \"j\", \"k\", \"l\"],\n      o: [\"i\", \"p\", \"k\", \"l\"],\n      p: [\"o\", \"l\"],\n      a: [\"q\", \"w\", \"s\", \"z\", \"x\"],\n      s: [\"q\", \"w\", \"e\", \"a\", \"d\", \"z\", \"x\", \"c\"],\n      d: [\"w\", \"e\", \"r\", \"s\", \"f\", \"x\", \"c\", \"v\"],\n      f: [\"e\", \"r\", \"t\", \"d\", \"g\", \"c\", \"v\", \"b\"],\n      g: [\"r\", \"t\", \"y\", \"f\", \"h\", \"v\", \"b\", \"n\"],\n      h: [\"t\", \"y\", \"u\", \"g\", \"j\", \"b\", \"n\", \"m\"],\n      j: [\"y\", \"u\", \"i\", \"h\", \"k\", \"n\", \"m\"],\n      k: [\"u\", \"i\", \"o\", \"j\", \"l\", \"m\"],\n      l: [\"i\", \"o\", \"p\", \"k\"],\n      z: [\"a\", \"s\", \"x\"],\n      x: [\"a\", \"s\", \"d\", \"z\", \"c\"],\n      c: [\"s\", \"d\", \"f\", \"x\", \"v\"],\n      v: [\"d\", \"f\", \"g\", \"c\", \"b\"],\n      b: [\"f\", \"g\", \"h\", \"v\", \"n\"],\n      n: [\"g\", \"h\", \"j\", \"b\", \"m\"],\n      m: [\"h\", \"j\", \"k\", \"n\"],\n    };\n  }\n\n  /**\n   * Generate n-grams for partial matching\n   */\n  generateNgrams(word: string, n: number = 3): string[] {\n    const normalized = this.normalize(word);\n    if (normalized.length < n) return [normalized];\n\n    const ngrams: string[] = [];\n    for (let i = 0; i <= normalized.length - n; i++) {\n      ngrams.push(normalized.slice(i, i + n));\n    }\n    return ngrams;\n  }\n\n  /**\n   * Calculate basic edit distance (Levenshtein)\n   */\n  calculateEditDistance(str1: string, str2: string): number {\n    const matrix: number[][] = [];\n    const len1 = str1.length;\n    const len2 = str2.length;\n\n    // Initialize matrix\n    for (let i = 0; i <= len1; i++) {\n      matrix[i] = [i];\n    }\n    for (let j = 0; j <= len2; j++) {\n      matrix[0][j] = j;\n    }\n\n    // Fill matrix\n    for (let i = 1; i <= len1; i++) {\n      for (let j = 1; j <= len2; j++) {\n        const cost = str1[i - 1] === str2[j - 1] ? 0 : 1;\n        matrix[i][j] = Math.min(\n          matrix[i - 1][j] + 1, // deletion\n          matrix[i][j - 1] + 1, // insertion\n          matrix[i - 1][j - 1] + cost // substitution\n        );\n      }\n    }\n\n    return matrix[len1][len2];\n  }\n}\n","import { BaseLanguageProcessor } from \"../base/LanguageProcessor.js\";\nimport type { FuzzyFeature } from \"../../core/types.js\";\n\n/**\n * German language processor with specialized features:\n * - Umlaut normalization (ä, ö, ü, ß)\n * - Compound word splitting\n * - German-specific phonetic matching (Kölner Phonetik)\n * - Common German word endings\n */\nexport class GermanProcessor extends BaseLanguageProcessor {\n  readonly language = \"german\";\n  readonly displayName = \"Deutsch\";\n  readonly supportedFeatures: FuzzyFeature[] = [\"phonetic\", \"compound\", \"synonyms\", \"keyboard-neighbors\", \"partial-words\", \"missing-letters\", \"extra-letters\"];\n\n  /**\n   * German text normalization with umlaut handling\n   */\n  normalize(text: string): string {\n    return (\n      text\n        .toLowerCase()\n        .trim()\n        .replace(/\\s+/g, \" \")\n        // Normalize umlauts\n        .replace(/ä/g, \"ae\")\n        .replace(/ö/g, \"oe\")\n        .replace(/ü/g, \"ue\")\n        .replace(/ß/g, \"ss\")\n    );\n  }\n\n  /**\n   * Kölner Phonetik algorithm for German phonetic matching\n   */\n  getPhoneticCode(word: string): string {\n    const normalized = this.normalize(word);\n    if (normalized.length === 0) return \"\";\n\n    let code = \"\";\n    let prev = \"\";\n\n    for (let i = 0; i < normalized.length; i++) {\n      const char = normalized[i];\n      const next = i < normalized.length - 1 ? normalized[i + 1] : \"\";\n      let digit = \"\";\n\n      switch (char) {\n        case \"a\":\n        case \"e\":\n        case \"i\":\n        case \"j\":\n        case \"o\":\n        case \"u\":\n        case \"y\":\n          digit = \"0\";\n          break;\n        case \"h\":\n          // H is ignored\n          continue;\n        case \"b\":\n        case \"p\":\n          digit = \"1\";\n          break;\n        case \"d\":\n        case \"t\":\n          if (next === \"c\" || next === \"s\" || next === \"z\") {\n            digit = \"8\";\n          } else {\n            digit = \"2\";\n          }\n          break;\n        case \"f\":\n        case \"v\":\n        case \"w\":\n          digit = \"3\";\n          break;\n        case \"g\":\n        case \"k\":\n        case \"q\":\n          digit = \"4\";\n          break;\n        case \"c\":\n          if (i === 0) {\n            if (next === \"a\" || next === \"h\" || next === \"k\" || next === \"l\" || next === \"o\" || next === \"q\" || next === \"r\" || next === \"u\" || next === \"x\") {\n              digit = \"4\";\n            } else {\n              digit = \"8\";\n            }\n          } else {\n            if (prev === \"s\" || prev === \"z\") {\n              digit = \"8\";\n            } else if (next === \"h\") {\n              digit = \"4\";\n            } else if (next === \"k\" || next === \"q\") {\n              digit = \"4\";\n            } else {\n              digit = \"8\";\n            }\n          }\n          break;\n        case \"x\":\n          if (prev === \"c\" || prev === \"k\" || prev === \"q\") {\n            digit = \"8\";\n          } else {\n            digit = \"48\";\n          }\n          break;\n        case \"l\":\n          digit = \"5\";\n          break;\n        case \"m\":\n        case \"n\":\n          digit = \"6\";\n          break;\n        case \"r\":\n          digit = \"7\";\n          break;\n        case \"s\":\n        case \"z\":\n          digit = \"8\";\n          break;\n        default:\n          continue;\n      }\n\n      // Don't add consecutive identical digits\n      if (digit && digit !== prev) {\n        code += digit;\n      }\n      prev = digit;\n    }\n\n    return code || \"0\";\n  }\n\n  /**\n   * German compound word splitting\n   * Uses common German compound patterns and a dictionary approach\n   */\n  splitCompoundWords(word: string): string[] {\n    const normalized = this.normalize(word);\n    if (normalized.length < 6) return [word]; // Too short to be compound\n\n    const parts: string[] = [];\n    const commonPrefixes = this.getCommonPrefixes();\n    const commonSuffixes = this.getCommonSuffixes();\n    const commonWords = this.getCommonWords();\n\n    // Try to find known prefixes\n    for (const prefix of commonPrefixes) {\n      if (normalized.startsWith(prefix) && normalized.length > prefix.length + 3) {\n        const remainder = normalized.slice(prefix.length);\n        parts.push(prefix);\n        parts.push(...this.splitCompoundWords(remainder));\n        break;\n      }\n    }\n\n    if (parts.length === 0) {\n      // Try to find known suffixes\n      for (const suffix of commonSuffixes) {\n        if (normalized.endsWith(suffix) && normalized.length > suffix.length + 3) {\n          const remainder = normalized.slice(0, -suffix.length);\n          parts.push(...this.splitCompoundWords(remainder));\n          parts.push(suffix);\n          break;\n        }\n      }\n    }\n\n    if (parts.length === 0) {\n      // Try to find known words within the compound\n      for (let i = 3; i <= normalized.length - 3; i++) {\n        const leftPart = normalized.slice(0, i);\n        const rightPart = normalized.slice(i);\n\n        if (commonWords.has(leftPart) && rightPart.length >= 3) {\n          parts.push(leftPart);\n          parts.push(...this.splitCompoundWords(rightPart));\n          break;\n        }\n      }\n    }\n\n    return parts.length > 0 ? parts : [word];\n  }\n\n  /**\n   * German word variants including common endings\n   */\n  getWordVariants(word: string): string[] {\n    const variants = new Set<string>();\n    const normalized = this.normalize(word);\n\n    variants.add(normalized);\n    variants.add(word);\n\n    // Add compound word parts\n    const compoundParts = this.splitCompoundWords(word);\n    compoundParts.forEach((part) => variants.add(this.normalize(part)));\n\n    // Add variants without German endings\n    const germanEndings = this.getCommonEndings();\n    for (const ending of germanEndings) {\n      if (normalized.endsWith(ending) && normalized.length > ending.length + 2) {\n        variants.add(normalized.slice(0, -ending.length));\n      }\n    }\n\n    // Add partial variants\n    if (normalized.length > 4) {\n      for (let i = 3; i < normalized.length; i++) {\n        variants.add(normalized.slice(0, i));\n      }\n    }\n\n    return Array.from(variants);\n  }\n\n  /**\n   * German word endings\n   */\n  protected getCommonEndings(): string[] {\n    return [\n      //\n      \"en\",\n      \"e\",\n      \"er\",\n      \"n\",\n      \"r\",\n      \"s\",\n      \"es\",\n      \"t\",\n      \"ung\",\n      \"heit\",\n      \"keit\",\n      \"schaft\",\n      \"chen\",\n      \"lein\",\n      \"lich\",\n      \"ig\",\n      \"isch\",\n      \"bar\",\n      \"los\",\n      \"voll\",\n    ];\n  }\n\n  /**\n   * German synonyms for common words\n   */\n  getSynonyms(word: string): string[] {\n    const synonymMap: Record<string, string[]> = {\n      arzt: [\n        //\n        \"doktor\",\n        \"mediziner\",\n        \"doc\",\n      ],\n      krankenhaus: [\n        //\n        \"spital\",\n        \"klinik\",\n        \"hospital\",\n      ],\n      schule: [\n        //\n        \"bildungseinrichtung\",\n        \"lehranstalt\",\n      ],\n      auto: [\n        //\n        \"wagen\",\n        \"fahrzeug\",\n        \"pkw\",\n      ],\n      haus: [\n        //\n        \"gebaeude\",\n        \"heim\",\n        \"wohnhaus\",\n      ],\n      strasse: [\n        //\n        \"weg\",\n        \"gasse\",\n        \"allee\",\n      ],\n      stadt: [\n        //\n        \"ort\",\n        \"gemeinde\",\n        \"ortschaft\",\n      ],\n      arbeit: [\n        //\n        \"job\",\n        \"beruf\",\n        \"taetigkeit\",\n      ],\n      geld: [\n        //\n        \"waehrung\",\n        \"kapital\",\n        \"finanzen\",\n      ],\n      zeit: [\n        //\n        \"dauer\",\n        \"periode\",\n        \"zeitraum\",\n      ],\n    };\n\n    const normalized = this.normalize(word);\n    return synonymMap[normalized] || [];\n  }\n\n  /**\n   * German keyboard layout (QWERTZ)\n   */\n  protected getKeyboardNeighbors(): Record<string, string[]> {\n    return {\n      q: [\n        //\n        \"w\",\n        \"a\",\n        \"s\",\n      ],\n      w: [\n        //\n        \"q\",\n        \"e\",\n        \"a\",\n        \"s\",\n        \"d\",\n      ],\n      e: [\n        //\n        \"w\",\n        \"r\",\n        \"s\",\n        \"d\",\n        \"f\",\n      ],\n      r: [\n        //\n        \"e\",\n        \"t\",\n        \"d\",\n        \"f\",\n        \"g\",\n      ],\n      t: [\n        //\n        \"r\",\n        \"z\",\n        \"f\",\n        \"g\",\n        \"h\",\n      ],\n      z: [\n        //\n        \"t\",\n        \"u\",\n        \"g\",\n        \"h\",\n        \"j\",\n      ], // QWERTZ difference\n      u: [\n        //\n        \"z\",\n        \"i\",\n        \"h\",\n        \"j\",\n        \"k\",\n      ],\n      i: [\n        //\n        \"u\",\n        \"o\",\n        \"j\",\n        \"k\",\n        \"l\",\n      ],\n      o: [\n        //\n        \"i\",\n        \"p\",\n        \"k\",\n        \"l\",\n        \"oe\",\n      ],\n      p: [\n        //\n        \"o\",\n        \"ue\",\n        \"l\",\n        \"oe\",\n      ],\n      ue: [\n        //\n        \"p\",\n        \"ae\",\n      ], // German umlaut\n      a: [\n        //\n        \"q\",\n        \"w\",\n        \"s\",\n        \"y\",\n        \"x\",\n      ],\n      s: [\n        //\n        \"q\",\n        \"w\",\n        \"e\",\n        \"a\",\n        \"d\",\n        \"y\",\n        \"x\",\n        \"c\",\n      ],\n      d: [\n        //\n        \"w\",\n        \"e\",\n        \"r\",\n        \"s\",\n        \"f\",\n        \"x\",\n        \"c\",\n        \"v\",\n      ],\n      f: [\n        //\n        \"e\",\n        \"r\",\n        \"t\",\n        \"d\",\n        \"g\",\n        \"c\",\n        \"v\",\n        \"b\",\n      ],\n      g: [\n        //\n        \"r\",\n        \"t\",\n        \"z\",\n        \"f\",\n        \"h\",\n        \"v\",\n        \"b\",\n        \"n\",\n      ],\n      h: [\n        //\n        \"t\",\n        \"z\",\n        \"u\",\n        \"g\",\n        \"j\",\n        \"b\",\n        \"n\",\n        \"m\",\n      ],\n      j: [\n        //\n        \"z\",\n        \"u\",\n        \"i\",\n        \"h\",\n        \"k\",\n        \"n\",\n        \"m\",\n      ],\n      k: [\n        //\n        \"u\",\n        \"i\",\n        \"o\",\n        \"j\",\n        \"l\",\n        \"m\",\n      ],\n      l: [\n        //\n        \"i\",\n        \"o\",\n        \"p\",\n        \"k\",\n        \"oe\",\n      ],\n      oe: [\n        //\n        \"o\",\n        \"p\",\n        \"ue\",\n        \"l\",\n        \"ae\",\n      ], // German umlaut\n      ae: [\n        //\n        \"ue\",\n        \"oe\",\n      ], // German umlaut\n      y: [\n        //\n        \"a\",\n        \"s\",\n        \"x\",\n      ], // QWERTZ difference\n      x: [\n        //\n        \"a\",\n        \"s\",\n        \"d\",\n        \"y\",\n        \"c\",\n      ],\n      c: [\n        //\n        \"s\",\n        \"d\",\n        \"f\",\n        \"x\",\n        \"v\",\n      ],\n      v: [\n        //\n        \"d\",\n        \"f\",\n        \"g\",\n        \"c\",\n        \"b\",\n      ],\n      b: [\n        //\n        \"f\",\n        \"g\",\n        \"h\",\n        \"v\",\n        \"n\",\n      ],\n      n: [\n        //\n        \"g\",\n        \"h\",\n        \"j\",\n        \"b\",\n        \"m\",\n      ],\n      m: [\n        //\n        \"h\",\n        \"j\",\n        \"k\",\n        \"n\",\n      ],\n    };\n  }\n\n  /**\n   * Common German prefixes for compound word splitting\n   */\n  private getCommonPrefixes(): string[] {\n    return [\"un\", \"vor\", \"nach\", \"bei\", \"mit\", \"ab\", \"an\", \"auf\", \"aus\", \"ein\", \"gegen\", \"hinter\", \"neben\", \"ueber\", \"unter\", \"zwischen\", \"selbst\"];\n  }\n\n  /**\n   * Common German suffixes for compound word splitting\n   */\n  private getCommonSuffixes(): string[] {\n    return [\"haus\", \"platz\", \"strasse\", \"weg\", \"hof\", \"berg\", \"tal\", \"feld\", \"stadt\", \"dorf\", \"heim\", \"werk\", \"bau\", \"anlage\", \"zentrum\"];\n  }\n\n  /**\n   * Common German words for compound splitting\n   */\n  private getCommonWords(): Set<string> {\n    return new Set([\"kranken\", \"kinder\", \"frauen\", \"maenner\", \"alt\", \"neu\", \"gross\", \"klein\", \"hoch\", \"tief\", \"lang\", \"kurz\", \"breit\", \"schmal\", \"dick\", \"duenn\", \"stark\", \"schwach\", \"schnell\", \"langsam\", \"heiss\", \"kalt\", \"warm\", \"auto\", \"bahn\", \"bus\", \"zug\", \"flug\", \"schiff\", \"rad\", \"motor\", \"wasser\", \"feuer\", \"erde\", \"luft\", \"licht\", \"schatten\", \"sonne\", \"mond\", \"tag\", \"nacht\", \"morgen\", \"abend\", \"mittag\", \"zeit\", \"jahr\", \"monat\"]);\n  }\n}\n","import { BaseLanguageProcessor } from \"../base/LanguageProcessor.js\";\nimport type { FuzzyFeature } from \"../../core/types.js\";\n\n/**\n * English language processor with specialized features:\n * - Metaphone phonetic algorithm\n * - Common English contractions\n * - English-specific word endings\n * - Comprehensive synonym support\n */\nexport class EnglishProcessor extends BaseLanguageProcessor {\n  readonly language = \"english\";\n  readonly displayName = \"English\";\n  readonly supportedFeatures: FuzzyFeature[] = [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"extra-letters\",\n    \"transpositions\",\n  ];\n\n  /**\n   * English text normalization with contraction handling\n   */\n  normalize(text: string): string {\n    return (\n      text\n        .toLowerCase()\n        .trim()\n        .replace(/\\s+/g, \" \")\n        // Handle common contractions\n        .replace(/won't/g, \"will not\")\n        .replace(/can't/g, \"cannot\")\n        .replace(/n't/g, \" not\")\n        .replace(/'re/g, \" are\")\n        .replace(/'ve/g, \" have\")\n        .replace(/'ll/g, \" will\")\n        .replace(/'d/g, \" would\")\n        .replace(/'m/g, \" am\")\n        .replace(/'/g, \"\")\n    ); // Remove remaining apostrophes\n  }\n\n  /**\n   * Simplified Metaphone algorithm for English phonetic matching\n   */\n  getPhoneticCode(word: string): string {\n    const normalized = this.normalize(word).replace(/[^a-z]/g, \"\");\n    if (normalized.length === 0) return \"\";\n\n    let metaphone = \"\";\n    let current = 0;\n    const length = normalized.length;\n\n    // Handle initial letters\n    if (normalized.startsWith(\"gn\") || normalized.startsWith(\"kn\") || normalized.startsWith(\"pn\") || normalized.startsWith(\"wr\")) {\n      current = 1;\n    }\n\n    while (current < length && metaphone.length < 4) {\n      const char = normalized[current];\n      const next = current + 1 < length ? normalized[current + 1] : \"\";\n      const prev = current > 0 ? normalized[current - 1] : \"\";\n\n      switch (char) {\n        case \"a\":\n        case \"e\":\n        case \"i\":\n        case \"o\":\n        case \"u\":\n          if (current === 0) metaphone += char.toUpperCase();\n          break;\n        case \"b\":\n          if (current === length - 1 && prev === \"m\") {\n            // Silent B at end after M\n          } else {\n            metaphone += \"B\";\n          }\n          break;\n        case \"c\":\n          if (next === \"h\") {\n            metaphone += \"X\";\n            current++;\n          } else if (next === \"i\" || next === \"e\" || next === \"y\") {\n            metaphone += \"S\";\n          } else {\n            metaphone += \"K\";\n          }\n          break;\n        case \"d\":\n          if (next === \"g\") {\n            metaphone += \"J\";\n            current++;\n          } else {\n            metaphone += \"T\";\n          }\n          break;\n        case \"f\":\n          metaphone += \"F\";\n          break;\n        case \"g\":\n          if (next === \"h\" && current !== 0) {\n            // Silent GH\n          } else if (next === \"n\") {\n            metaphone += \"N\";\n            current++;\n          } else if (next === \"i\" || next === \"e\" || next === \"y\") {\n            metaphone += \"J\";\n          } else {\n            metaphone += \"K\";\n          }\n          break;\n        case \"h\":\n          if (current === 0 || \"aeiou\".includes(prev) || \"aeiou\".includes(next)) {\n            metaphone += \"H\";\n          }\n          break;\n        case \"j\":\n          metaphone += \"J\";\n          break;\n        case \"k\":\n          if (prev !== \"c\") {\n            metaphone += \"K\";\n          }\n          break;\n        case \"l\":\n          metaphone += \"L\";\n          break;\n        case \"m\":\n          metaphone += \"M\";\n          break;\n        case \"n\":\n          metaphone += \"N\";\n          break;\n        case \"p\":\n          if (next === \"h\") {\n            metaphone += \"F\";\n            current++;\n          } else {\n            metaphone += \"P\";\n          }\n          break;\n        case \"q\":\n          metaphone += \"K\";\n          break;\n        case \"r\":\n          metaphone += \"R\";\n          break;\n        case \"s\":\n          if (next === \"h\") {\n            metaphone += \"X\";\n            current++;\n          } else {\n            metaphone += \"S\";\n          }\n          break;\n        case \"t\":\n          if (next === \"h\") {\n            metaphone += \"0\";\n            current++;\n          } else if (next === \"i\" && current + 2 < length && (normalized[current + 2] === \"a\" || normalized[current + 2] === \"o\")) {\n            metaphone += \"X\";\n          } else {\n            metaphone += \"T\";\n          }\n          break;\n        case \"v\":\n          metaphone += \"F\";\n          break;\n        case \"w\":\n          if (\"aeiou\".includes(next)) {\n            metaphone += \"W\";\n          }\n          break;\n        case \"x\":\n          metaphone += \"KS\";\n          break;\n        case \"y\":\n          if (\"aeiou\".includes(next)) {\n            metaphone += \"Y\";\n          }\n          break;\n        case \"z\":\n          metaphone += \"S\";\n          break;\n      }\n      current++;\n    }\n\n    return metaphone || \"A\";\n  }\n\n  /**\n   * English word variants\n   */\n  getWordVariants(word: string): string[] {\n    const variants = new Set<string>();\n    const normalized = this.normalize(word);\n\n    variants.add(normalized);\n    variants.add(word);\n\n    // Add variants without English endings\n    const englishEndings = this.getCommonEndings();\n    for (const ending of englishEndings) {\n      if (normalized.endsWith(ending) && normalized.length > ending.length + 2) {\n        variants.add(normalized.slice(0, -ending.length));\n      }\n    }\n\n    // Add plural/singular variants\n    if (normalized.endsWith(\"s\") && normalized.length > 3) {\n      variants.add(normalized.slice(0, -1));\n    }\n    if (!normalized.endsWith(\"s\")) {\n      variants.add(normalized + \"s\");\n    }\n\n    // Add -ing/-ed variants\n    if (normalized.endsWith(\"ing\") && normalized.length > 5) {\n      const base = normalized.slice(0, -3);\n      variants.add(base);\n      variants.add(base + \"e\"); // handle dropped 'e'\n    }\n    if (normalized.endsWith(\"ed\") && normalized.length > 4) {\n      const base = normalized.slice(0, -2);\n      variants.add(base);\n      variants.add(base + \"e\"); // handle dropped 'e'\n    }\n\n    // Add partial variants\n    if (normalized.length > 4) {\n      for (let i = 3; i < normalized.length; i++) {\n        variants.add(normalized.slice(0, i));\n      }\n    }\n\n    return Array.from(variants);\n  }\n\n  /**\n   * English word endings\n   */\n  protected getCommonEndings(): string[] {\n    return [\n      //\n      \"s\",\n      \"es\",\n      \"ed\",\n      \"ing\",\n      \"er\",\n      \"est\",\n      \"ly\",\n      \"tion\",\n      \"sion\",\n      \"ness\",\n      \"ment\",\n      \"able\",\n      \"ible\",\n      \"ful\",\n      \"less\",\n      \"ous\",\n      \"ious\",\n      \"al\",\n      \"ial\",\n      \"ic\",\n      \"ive\",\n      \"ary\",\n      \"ery\",\n      \"ory\",\n    ];\n  }\n\n  /**\n   * English synonyms for common words\n   */\n  getSynonyms(word: string): string[] {\n    const synonymMap: Record<string, string[]> = {\n      doctor: [\n        //\n        \"physician\",\n        \"medic\",\n        \"doc\",\n        \"md\",\n      ],\n      hospital: [\n        //\n        \"clinic\",\n        \"medical center\",\n        \"infirmary\",\n      ],\n      school: [\n        //\n        \"academy\",\n        \"institution\",\n        \"college\",\n        \"university\",\n      ],\n      car: [\n        //\n        \"vehicle\",\n        \"automobile\",\n        \"auto\",\n      ],\n      house: [\n        //\n        \"home\",\n        \"residence\",\n        \"dwelling\",\n        \"building\",\n      ],\n      street: [\n        //\n        \"road\",\n        \"avenue\",\n        \"lane\",\n        \"boulevard\",\n      ],\n      city: [\n        //\n        \"town\",\n        \"municipality\",\n        \"urban area\",\n      ],\n      work: [\n        //\n        \"job\",\n        \"employment\",\n        \"occupation\",\n        \"career\",\n      ],\n      money: [\n        //\n        \"cash\",\n        \"currency\",\n        \"funds\",\n        \"capital\",\n      ],\n      time: [\n        //\n        \"duration\",\n        \"period\",\n        \"moment\",\n        \"hour\",\n      ],\n      big: [\n        //\n        \"large\",\n        \"huge\",\n        \"enormous\",\n        \"massive\",\n        \"giant\",\n      ],\n      small: [\n        //\n        \"little\",\n        \"tiny\",\n        \"miniature\",\n        \"petite\",\n      ],\n      fast: [\n        //\n        \"quick\",\n        \"rapid\",\n        \"speedy\",\n        \"swift\",\n      ],\n      slow: [\n        //\n        \"sluggish\",\n        \"gradual\",\n        \"leisurely\",\n      ],\n      good: [\n        //\n        \"excellent\",\n        \"great\",\n        \"wonderful\",\n        \"fine\",\n      ],\n      bad: [\n        //\n        \"poor\",\n        \"terrible\",\n        \"awful\",\n        \"horrible\",\n      ],\n      happy: [\n        //\n        \"joyful\",\n        \"cheerful\",\n        \"glad\",\n        \"pleased\",\n      ],\n      sad: [\n        //\n        \"unhappy\",\n        \"depressed\",\n        \"melancholy\",\n        \"sorrowful\",\n      ],\n    };\n\n    const normalized = this.normalize(word);\n    return synonymMap[normalized] || [];\n  }\n}\n","import { BaseLanguageProcessor } from \"../base/LanguageProcessor.js\";\nimport type { FuzzyFeature } from \"../../core/types.js\";\n\n/**\n * Spanish language processor with specialized features:\n * - Accent normalization (á, é, í, ó, ú, ñ)\n * - Spanish phonetic patterns\n * - Common Spanish word endings\n * - Spanish synonym support\n */\nexport class SpanishProcessor extends BaseLanguageProcessor {\n  readonly language = \"spanish\";\n  readonly displayName = \"Español\";\n  readonly supportedFeatures: FuzzyFeature[] = [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"extra-letters\",\n  ];\n\n  /**\n   * Spanish text normalization with accent handling\n   */\n  normalize(text: string): string {\n    return (\n      text\n        .toLowerCase()\n        .trim()\n        .replace(/\\s+/g, \" \")\n        // Normalize accented characters\n        .replace(/á/g, \"a\")\n        .replace(/é/g, \"e\")\n        .replace(/í/g, \"i\")\n        .replace(/ó/g, \"o\")\n        .replace(/ú/g, \"u\")\n        .replace(/ñ/g, \"n\")\n        .replace(/ü/g, \"u\")\n    );\n  }\n\n  /**\n   * Spanish phonetic matching\n   */\n  getPhoneticCode(word: string): string {\n    const normalized = this.normalize(word);\n    if (normalized.length === 0) return \"\";\n\n    let code = \"\";\n    let prev = \"\";\n\n    for (let i = 0; i < normalized.length; i++) {\n      const char = normalized[i];\n      const next = i < normalized.length - 1 ? normalized[i + 1] : \"\";\n      let digit = \"\";\n\n      switch (char) {\n        case \"a\":\n        case \"e\":\n        case \"i\":\n        case \"o\":\n        case \"u\":\n          digit = \"0\";\n          break;\n        case \"b\":\n        case \"v\": // B and V sound similar in Spanish\n          digit = \"1\";\n          break;\n        case \"c\":\n          if (next === \"h\") {\n            digit = \"2\"; // CH sound\n          } else if (next === \"e\" || next === \"i\") {\n            digit = \"8\"; // CE, CI sounds like S\n          } else {\n            digit = \"4\";\n          }\n          break;\n        case \"d\":\n          digit = \"3\";\n          break;\n        case \"f\":\n          digit = \"5\";\n          break;\n        case \"g\":\n          if (next === \"u\" && i + 2 < normalized.length && (normalized[i + 2] === \"e\" || normalized[i + 2] === \"i\")) {\n            digit = \"4\"; // GUE, GUI\n          } else if (next === \"e\" || next === \"i\") {\n            digit = \"6\"; // GE, GI sound like J\n          } else {\n            digit = \"4\";\n          }\n          break;\n        case \"h\":\n          // H is silent in Spanish\n          continue;\n        case \"j\":\n          digit = \"6\";\n          break;\n        case \"k\":\n          digit = \"4\";\n          break;\n        case \"l\":\n          if (next === \"l\") {\n            digit = \"7\"; // LL sound\n          } else {\n            digit = \"5\";\n          }\n          break;\n        case \"m\":\n          digit = \"6\";\n          break;\n        case \"n\":\n          if (next === \"n\") {\n            digit = \"7\"; // NN sound (rare)\n          } else {\n            digit = \"6\";\n          }\n          break;\n        case \"ñ\":\n          digit = \"7\"; // Ñ sound\n          break;\n        case \"p\":\n          digit = \"1\";\n          break;\n        case \"q\":\n          digit = \"4\";\n          break;\n        case \"r\":\n          if (next === \"r\" || i === 0) {\n            digit = \"8\"; // RR or initial R\n          } else {\n            digit = \"7\";\n          }\n          break;\n        case \"s\":\n          digit = \"8\";\n          break;\n        case \"t\":\n          digit = \"3\";\n          break;\n        case \"w\":\n          digit = \"1\"; // Rare in Spanish\n          break;\n        case \"x\":\n          digit = \"48\";\n          break;\n        case \"y\":\n          digit = \"7\";\n          break;\n        case \"z\":\n          digit = \"8\";\n          break;\n        default:\n          continue;\n      }\n\n      if (digit && digit !== prev) {\n        code += digit;\n      }\n      prev = digit;\n    }\n\n    return code || \"0\";\n  }\n\n  /**\n   * Spanish word endings\n   */\n  protected getCommonEndings(): string[] {\n    return [\n      //\n      \"o\",\n      \"a\",\n      \"os\",\n      \"as\",\n      \"e\",\n      \"es\",\n      \"ar\",\n      \"er\",\n      \"ir\",\n      \"ado\",\n      \"ada\",\n      \"idos\",\n      \"idas\",\n      \"ando\",\n      \"endo\",\n      \"iendo\",\n      \"cion\",\n      \"sion\",\n      \"dad\",\n      \"tad\",\n      \"mente\",\n      \"oso\",\n      \"osa\",\n      \"ito\",\n      \"ita\",\n      \"illo\",\n      \"illa\",\n    ];\n  }\n\n  /**\n   * Spanish synonyms\n   */\n  getSynonyms(word: string): string[] {\n    const synonymMap: Record<string, string[]> = {\n      medico: [\n        //\n        \"doctor\",\n        \"facultativo\",\n      ],\n      hospital: [\n        //\n        \"clinica\",\n        \"sanatorio\",\n      ],\n      escuela: [\n        //\n        \"colegio\",\n        \"instituto\",\n      ],\n      coche: [\n        //\n        \"auto\",\n        \"automovil\",\n        \"vehiculo\",\n      ],\n      casa: [\n        //\n        \"hogar\",\n        \"vivienda\",\n        \"domicilio\",\n      ],\n      calle: [\n        //\n        \"via\",\n        \"avenida\",\n        \"carretera\",\n      ],\n      ciudad: [\n        //\n        \"urbe\",\n        \"poblacion\",\n        \"municipio\",\n      ],\n      trabajo: [\n        //\n        \"empleo\",\n        \"ocupacion\",\n        \"labor\",\n      ],\n      dinero: [\n        //\n        \"plata\",\n        \"efectivo\",\n        \"capital\",\n      ],\n      tiempo: [\n        //\n        \"momento\",\n        \"periodo\",\n        \"duracion\",\n      ],\n      grande: [\n        //\n        \"enorme\",\n        \"gigante\",\n        \"inmenso\",\n      ],\n      pequeno: [\n        //\n        \"chico\",\n        \"diminuto\",\n        \"minusculo\",\n      ],\n      rapido: [\n        //\n        \"veloz\",\n        \"ligero\",\n        \"acelerado\",\n      ],\n      lento: [\n        //\n        \"despacio\",\n        \"pausado\",\n      ],\n      bueno: [\n        //\n        \"excelente\",\n        \"magnifico\",\n        \"estupendo\",\n      ],\n      malo: [\n        //\n        \"pesimo\",\n        \"terrible\",\n        \"horrible\",\n      ],\n    };\n\n    const normalized = this.normalize(word);\n    return synonymMap[normalized] || [];\n  }\n}\n","import { BaseLanguageProcessor } from \"../base/LanguageProcessor.js\";\nimport type { FuzzyFeature } from \"../../core/types.js\";\n\n/**\n * French language processor with specialized features:\n * - Accent normalization (à, é, è, ê, ç, etc.)\n * - French phonetic patterns\n * - Common French word endings\n * - French synonym support\n */\nexport class FrenchProcessor extends BaseLanguageProcessor {\n  readonly language = \"french\";\n  readonly displayName = \"Français\";\n  readonly supportedFeatures: FuzzyFeature[] = [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"extra-letters\",\n  ];\n\n  /**\n   * French text normalization with accent handling\n   */\n  normalize(text: string): string {\n    return (\n      text\n        .toLowerCase()\n        .trim()\n        .replace(/\\s+/g, \" \")\n        // Normalize accented characters\n        .replace(/[àáâãä]/g, \"a\")\n        .replace(/[èéêë]/g, \"e\")\n        .replace(/[ìíîï]/g, \"i\")\n        .replace(/[òóôõö]/g, \"o\")\n        .replace(/[ùúûü]/g, \"u\")\n        .replace(/ç/g, \"c\")\n        .replace(/ñ/g, \"n\")\n        .replace(/ÿ/g, \"y\")\n    );\n  }\n\n  /**\n   * French phonetic matching\n   */\n  getPhoneticCode(word: string): string {\n    const normalized = this.normalize(word);\n    if (normalized.length === 0) return \"\";\n\n    let code = \"\";\n    let prev = \"\";\n\n    for (let i = 0; i < normalized.length; i++) {\n      const char = normalized[i];\n      const next = i < normalized.length - 1 ? normalized[i + 1] : \"\";\n      const next2 = i < normalized.length - 2 ? normalized[i + 2] : \"\";\n      let digit = \"\";\n\n      switch (char) {\n        case \"a\":\n        case \"e\":\n        case \"i\":\n        case \"o\":\n        case \"u\":\n        case \"y\":\n          digit = \"0\";\n          break;\n        case \"b\":\n          digit = \"1\";\n          break;\n        case \"c\":\n          if (next === \"h\") {\n            digit = \"2\"; // CH sound\n          } else if (next === \"e\" || next === \"i\") {\n            digit = \"8\"; // CE, CI sounds like S\n          } else {\n            digit = \"4\";\n          }\n          break;\n        case \"d\":\n          digit = \"3\";\n          break;\n        case \"f\":\n          digit = \"5\";\n          break;\n        case \"g\":\n          if (next === \"n\") {\n            digit = \"6\"; // GN sound\n          } else if (next === \"u\" && (next2 === \"e\" || next2 === \"i\")) {\n            digit = \"4\"; // GUE, GUI\n          } else if (next === \"e\" || next === \"i\") {\n            digit = \"6\"; // GE, GI sound like J\n          } else {\n            digit = \"4\";\n          }\n          break;\n        case \"h\":\n          // H is often silent in French\n          if (i === 0) {\n            digit = \"0\"; // Initial H\n          }\n          break;\n        case \"j\":\n          digit = \"6\";\n          break;\n        case \"k\":\n          digit = \"4\";\n          break;\n        case \"l\":\n          digit = \"5\";\n          break;\n        case \"m\":\n          digit = \"6\";\n          break;\n        case \"n\":\n          digit = \"6\";\n          break;\n        case \"p\":\n          if (next === \"h\") {\n            digit = \"5\"; // PH sounds like F\n          } else {\n            digit = \"1\";\n          }\n          break;\n        case \"q\":\n          digit = \"4\";\n          break;\n        case \"r\":\n          digit = \"7\";\n          break;\n        case \"s\":\n          digit = \"8\";\n          break;\n        case \"t\":\n          if (next === \"h\") {\n            digit = \"3\"; // TH sound\n          } else {\n            digit = \"3\";\n          }\n          break;\n        case \"v\":\n          digit = \"5\";\n          break;\n        case \"w\":\n          digit = \"5\"; // Rare in French\n          break;\n        case \"x\":\n          digit = \"48\";\n          break;\n        case \"z\":\n          digit = \"8\";\n          break;\n        default:\n          continue;\n      }\n\n      if (digit && digit !== prev) {\n        code += digit;\n      }\n      prev = digit;\n    }\n\n    return code || \"0\";\n  }\n\n  /**\n   * French word endings\n   */\n  protected getCommonEndings(): string[] {\n    return [\"e\", \"es\", \"s\", \"x\", \"ent\", \"ant\", \"ment\", \"tion\", \"sion\", \"eur\", \"euse\", \"teur\", \"trice\", \"able\", \"ible\", \"ique\", \"aire\", \"oire\", \"ette\", \"elle\", \"esse\", \"asse\", \"isse\", \"age\", \"isme\", \"iste\", \"ite\", \"ude\", \"ade\"];\n  }\n\n  /**\n   * French synonyms\n   */\n  getSynonyms(word: string): string[] {\n    const synonymMap: Record<string, string[]> = {\n      medecin: [\n        //\n        \"docteur\",\n        \"praticien\",\n      ],\n      hopital: [\n        //\n        \"clinique\",\n        \"centre medical\",\n      ],\n      ecole: [\n        //\n        \"etablissement\",\n        \"institution\",\n      ],\n      voiture: [\n        //\n        \"automobile\",\n        \"vehicule\",\n        \"auto\",\n      ],\n      maison: [\n        //\n        \"domicile\",\n        \"residence\",\n        \"habitation\",\n      ],\n      rue: [\n        //\n        \"avenue\",\n        \"boulevard\",\n        \"voie\",\n      ],\n      ville: [\n        //\n        \"cite\",\n        \"commune\",\n        \"agglomeration\",\n      ],\n      travail: [\n        //\n        \"emploi\",\n        \"occupation\",\n        \"metier\",\n      ],\n      argent: [\n        //\n        \"monnaie\",\n        \"especes\",\n        \"capital\",\n      ],\n      temps: [\n        //\n        \"duree\",\n        \"periode\",\n        \"moment\",\n      ],\n      grand: [\n        //\n        \"enorme\",\n        \"immense\",\n        \"gigantesque\",\n      ],\n      petit: [\n        //\n        \"minuscule\",\n        \"minime\",\n        \"reduit\",\n      ],\n      rapide: [\n        //\n        \"vite\",\n        \"accelere\",\n        \"prompt\",\n      ],\n      lent: [\n        //\n        \"lentement\",\n        \"doucement\",\n      ],\n      bon: [\n        //\n        \"excellent\",\n        \"parfait\",\n        \"formidable\",\n      ],\n      mauvais: [\n        //\n        \"terrible\",\n        \"affreux\",\n        \"horrible\",\n      ],\n      heureux: [\n        //\n        \"joyeux\",\n        \"content\",\n        \"ravi\",\n      ],\n      triste: [\n        //\n        \"malheureux\",\n        \"chagrine\",\n        \"melancolique\",\n      ],\n    };\n\n    const normalized = this.normalize(word);\n    return synonymMap[normalized] || [];\n  }\n\n  /**\n   * French keyboard layout (AZERTY)\n   */\n  protected getKeyboardNeighbors(): Record<string, string[]> {\n    return {\n      a: [\n        //\n        \"z\",\n        \"e\",\n        \"r\",\n        \"q\",\n        \"s\",\n      ],\n      z: [\n        //\n        \"a\",\n        \"e\",\n        \"r\",\n        \"q\",\n        \"s\",\n        \"d\",\n      ],\n      e: [\n        //\n        \"z\",\n        \"r\",\n        \"t\",\n        \"s\",\n        \"d\",\n        \"f\",\n      ],\n      r: [\n        //\n        \"e\",\n        \"t\",\n        \"y\",\n        \"d\",\n        \"f\",\n        \"g\",\n      ],\n      t: [\n        //\n        \"r\",\n        \"y\",\n        \"u\",\n        \"f\",\n        \"g\",\n        \"h\",\n      ],\n      y: [\n        //\n        \"t\",\n        \"u\",\n        \"i\",\n        \"g\",\n        \"h\",\n        \"j\",\n      ],\n      u: [\n        //\n        \"y\",\n        \"i\",\n        \"o\",\n        \"h\",\n        \"j\",\n        \"k\",\n      ],\n      i: [\n        //\n        \"u\",\n        \"o\",\n        \"p\",\n        \"j\",\n        \"k\",\n        \"l\",\n      ],\n      o: [\n        //\n        \"i\",\n        \"p\",\n        \"k\",\n        \"l\",\n        \"m\",\n      ],\n      p: [\n        //\n        \"o\",\n        \"l\",\n        \"m\",\n      ],\n      q: [\n        //\n        \"a\",\n        \"z\",\n        \"s\",\n        \"w\",\n        \"x\",\n      ],\n      s: [\n        //\n        \"a\",\n        \"z\",\n        \"e\",\n        \"q\",\n        \"d\",\n        \"w\",\n        \"x\",\n        \"c\",\n      ],\n      d: [\n        //\n        \"z\",\n        \"e\",\n        \"r\",\n        \"s\",\n        \"f\",\n        \"x\",\n        \"c\",\n        \"v\",\n      ],\n      f: [\n        //\n        \"e\",\n        \"r\",\n        \"t\",\n        \"d\",\n        \"g\",\n        \"c\",\n        \"v\",\n        \"b\",\n      ],\n      g: [\n        //\n        \"r\",\n        \"t\",\n        \"y\",\n        \"f\",\n        \"h\",\n        \"v\",\n        \"b\",\n        \"n\",\n      ],\n      h: [\n        //\n        \"t\",\n        \"y\",\n        \"u\",\n        \"g\",\n        \"j\",\n        \"b\",\n        \"n\",\n      ],\n      j: [\n        //\n        \"y\",\n        \"u\",\n        \"i\",\n        \"h\",\n        \"k\",\n        \"n\",\n      ],\n      k: [\n        //\n        \"u\",\n        \"i\",\n        \"o\",\n        \"j\",\n        \"l\",\n      ],\n      l: [\n        //\n        \"i\",\n        \"o\",\n        \"p\",\n        \"k\",\n        \"m\",\n      ],\n      m: [\n        //\n        \"o\",\n        \"p\",\n        \"l\",\n      ],\n      w: [\n        //\n        \"q\",\n        \"s\",\n        \"x\",\n      ],\n      x: [\n        //\n        \"q\",\n        \"s\",\n        \"d\",\n        \"w\",\n        \"c\",\n      ],\n      c: [\n        //\n        \"s\",\n        \"d\",\n        \"f\",\n        \"x\",\n        \"v\",\n      ],\n      v: [\n        //\n        \"d\",\n        \"f\",\n        \"g\",\n        \"c\",\n        \"b\",\n      ],\n      b: [\n        //\n        \"f\",\n        \"g\",\n        \"h\",\n        \"v\",\n        \"n\",\n      ],\n      n: [\n        //\n        \"g\",\n        \"h\",\n        \"j\",\n        \"b\",\n      ],\n    };\n  }\n}\n","import type { LanguageProcessor } from \"../core/types.js\";\nimport { GermanProcessor } from \"./german/GermanProcessor.js\";\nimport { EnglishProcessor } from \"./english/EnglishProcessor.js\";\nimport { SpanishProcessor } from \"./spanish/SpanishProcessor.js\";\nimport { FrenchProcessor } from \"./french/FrenchProcessor.js\";\n\n/**\n * Registry of all available language processors\n */\nexport class LanguageRegistry {\n  private static processors = new Map<string, LanguageProcessor>([\n    [\"german\", new GermanProcessor()],\n    [\"english\", new EnglishProcessor()],\n    [\"spanish\", new SpanishProcessor()],\n    [\"french\", new FrenchProcessor()],\n  ]);\n\n  /**\n   * Get a language processor by name\n   */\n  static getProcessor(language: string): LanguageProcessor | undefined {\n    return this.processors.get(language.toLowerCase());\n  }\n\n  /**\n   * Get multiple language processors\n   */\n  static getProcessors(languages: string[]): LanguageProcessor[] {\n    return languages.map((lang) => this.getProcessor(lang)).filter((processor): processor is LanguageProcessor => processor !== undefined);\n  }\n\n  /**\n   * Get all available language names\n   */\n  static getAvailableLanguages(): string[] {\n    return Array.from(this.processors.keys());\n  }\n\n  /**\n   * Register a custom language processor\n   */\n  static registerProcessor(processor: LanguageProcessor): void {\n    this.processors.set(processor.language.toLowerCase(), processor);\n  }\n\n  /**\n   * Check if a language is supported\n   */\n  static isSupported(language: string): boolean {\n    return this.processors.has(language.toLowerCase());\n  }\n\n  /**\n   * Get processor info for all languages\n   */\n  static getProcessorInfo(): Array<{\n    language: string;\n    displayName: string;\n    supportedFeatures: string[];\n  }> {\n    return Array.from(this.processors.values()).map((processor) => ({\n      language: processor.language,\n      displayName: processor.displayName,\n      supportedFeatures: processor.supportedFeatures,\n    }));\n  }\n}\n\n// Export individual processors for direct use\nexport { GermanProcessor } from \"./german/GermanProcessor.js\";\nexport { EnglishProcessor } from \"./english/EnglishProcessor.js\";\nexport { SpanishProcessor } from \"./spanish/SpanishProcessor.js\";\nexport { FrenchProcessor } from \"./french/FrenchProcessor.js\";\nexport { BaseLanguageProcessor } from \"./base/LanguageProcessor.js\";\n","/**\n * Optimized Levenshtein distance calculation with early termination\n * Performance-focused implementation for fuzzy matching\n */\n\n/**\n * Calculate Levenshtein distance with maximum threshold\n * Returns early if distance exceeds maxDistance for performance\n */\nexport function calculateLevenshteinDistance(str1: string, str2: string, maxDistance: number = Infinity): number {\n  const len1 = str1.length;\n  const len2 = str2.length;\n\n  // Quick checks for performance\n  if (Math.abs(len1 - len2) > maxDistance) {\n    return maxDistance + 1;\n  }\n\n  if (len1 === 0) return len2;\n  if (len2 === 0) return len1;\n  if (str1 === str2) return 0;\n\n  // Use single array optimization for memory efficiency\n  let previousRow = new Array(len2 + 1);\n  let currentRow = new Array(len2 + 1);\n\n  // Initialize first row\n  for (let j = 0; j <= len2; j++) {\n    previousRow[j] = j;\n  }\n\n  for (let i = 1; i <= len1; i++) {\n    currentRow[0] = i;\n    let minInRow = i;\n\n    for (let j = 1; j <= len2; j++) {\n      const cost = str1[i - 1] === str2[j - 1] ? 0 : 1;\n\n      currentRow[j] = Math.min(\n        currentRow[j - 1] + 1, // insertion\n        previousRow[j] + 1, // deletion\n        previousRow[j - 1] + cost // substitution\n      );\n\n      minInRow = Math.min(minInRow, currentRow[j]);\n    }\n\n    // Early termination if minimum in row exceeds threshold\n    if (minInRow > maxDistance) {\n      return maxDistance + 1;\n    }\n\n    // Swap arrays\n    [previousRow, currentRow] = [currentRow, previousRow];\n  }\n\n  return previousRow[len2];\n}\n\n/**\n * Calculate Damerau-Levenshtein distance (includes transpositions)\n * More expensive but handles character swaps\n */\nexport function calculateDamerauLevenshteinDistance(str1: string, str2: string, maxDistance: number = Infinity): number {\n  const len1 = str1.length;\n  const len2 = str2.length;\n\n  if (Math.abs(len1 - len2) > maxDistance) {\n    return maxDistance + 1;\n  }\n\n  if (len1 === 0) return len2;\n  if (len2 === 0) return len1;\n  if (str1 === str2) return 0;\n\n  const maxLen = Math.max(len1, len2);\n  const H: number[][] = [];\n  const INF = maxLen + 1;\n\n  // Initialize H matrix\n  for (let i = 0; i <= len1 + 1; i++) {\n    H[i] = new Array(len2 + 2).fill(INF);\n  }\n\n  H[0][0] = INF;\n  for (let i = 0; i <= len1; i++) {\n    H[i + 1][0] = INF;\n    H[i + 1][1] = i;\n  }\n  for (let j = 0; j <= len2; j++) {\n    H[0][j + 1] = INF;\n    H[1][j + 1] = j;\n  }\n\n  const charMap = new Map<string, number>();\n\n  for (let i = 1; i <= len1; i++) {\n    let lastMatchCol = 0;\n\n    for (let j = 1; j <= len2; j++) {\n      const char1 = str1[i - 1];\n      const char2 = str2[j - 1];\n      const lastMatchRow = charMap.get(char2) || 0;\n\n      let cost = 1;\n      if (char1 === char2) {\n        cost = 0;\n        lastMatchCol = j;\n      }\n\n      H[i + 1][j + 1] = Math.min(\n        H[i][j] + cost, // substitution\n        H[i + 1][j] + 1, // insertion\n        H[i][j + 1] + 1, // deletion\n        H[lastMatchRow][lastMatchCol] + (i - lastMatchRow - 1) + 1 + (j - lastMatchCol - 1) // transposition\n      );\n    }\n\n    charMap.set(str1[i - 1], i);\n  }\n\n  const result = H[len1 + 1][len2 + 1];\n  return result > maxDistance ? maxDistance + 1 : result;\n}\n\n/**\n * Fast approximate string matching using n-gram similarity\n * Much faster than edit distance for initial filtering\n */\nexport function calculateNgramSimilarity(str1: string, str2: string, n: number = 3): number {\n  if (str1 === str2) return 1.0;\n  if (str1.length === 0 || str2.length === 0) return 0.0;\n\n  const ngrams1 = generateNgrams(str1, n);\n  const ngrams2 = generateNgrams(str2, n);\n\n  if (ngrams1.length === 0 && ngrams2.length === 0) return 1.0;\n  if (ngrams1.length === 0 || ngrams2.length === 0) return 0.0;\n\n  const set1 = new Set(ngrams1);\n  const set2 = new Set(ngrams2);\n\n  const intersection = new Set([...set1].filter((x) => set2.has(x)));\n  const union = new Set([...set1, ...set2]);\n\n  return intersection.size / union.size;\n}\n\n/**\n * Generate n-grams from a string\n */\nfunction generateNgrams(str: string, n: number): string[] {\n  if (str.length < n) return [str];\n\n  const ngrams: string[] = [];\n  for (let i = 0; i <= str.length - n; i++) {\n    ngrams.push(str.slice(i, i + n));\n  }\n  return ngrams;\n}\n\n/**\n * Calculate similarity score (0-1) from edit distance\n */\nexport function distanceToSimilarity(distance: number, maxLength: number): number {\n  if (maxLength === 0) return distance === 0 ? 1.0 : 0.0;\n  return Math.max(0, 1 - distance / maxLength);\n}\n\n/**\n * Check if strings are similar within threshold using fast approximation\n */\nexport function areStringsSimilar(str1: string, str2: string, threshold: number = 0.8, maxDistance: number = 2): boolean {\n  // Quick exact match\n  if (str1 === str2) return true;\n\n  // Quick length check\n  const maxLen = Math.max(str1.length, str2.length);\n  if (Math.abs(str1.length - str2.length) > maxDistance) return false;\n\n  // Use n-gram similarity for fast approximation\n  const ngramSim = calculateNgramSimilarity(str1, str2);\n  if (ngramSim < threshold - 0.2) return false; // Early rejection\n\n  // Calculate actual edit distance only if n-gram similarity is promising\n  const distance = calculateLevenshteinDistance(str1, str2, maxDistance);\n  const similarity = distanceToSimilarity(distance, maxLen);\n\n  return similarity >= threshold;\n}\n","import type { FuzzyIndex, FuzzyConfig, SuggestionResult, SearchMatch, BuildIndexOptions, SearchOptions, LanguageProcessor } from \"./types.js\";\nimport { mergeConfig, validateConfig } from \"./config.js\";\nimport { LanguageRegistry } from \"../languages/index.js\";\nimport { calculateLevenshteinDistance, calculateNgramSimilarity } from \"../algorithms/levenshtein.js\";\n\n/**\n * Build a fuzzy search index from a dictionary of words\n */\nexport function buildFuzzyIndex(words: string[] = [], options: BuildIndexOptions = {}): FuzzyIndex {\n  const config = mergeConfig(options.config);\n  validateConfig(config);\n\n  // Convert features array to Set for O(1) lookup performance\n  const featureSet = new Set(config.features);\n\n  const languageProcessors = options.languageProcessors || LanguageRegistry.getProcessors(config.languages);\n\n  if (languageProcessors.length === 0) {\n    throw new Error(`No language processors found for: ${config.languages.join(\", \")}`);\n  }\n\n  const index: FuzzyIndex = {\n    base: [],\n    variantToBase: new Map(),\n    phoneticToBase: new Map(),\n    ngramIndex: new Map(),\n    synonymMap: new Map(),\n    languageProcessors: new Map(),\n    config,\n  };\n\n  // Store language processors\n  languageProcessors.forEach((processor) => {\n    index.languageProcessors.set(processor.language, processor);\n  });\n\n  const processedWords = new Set<string>();\n  let processed = 0;\n\n  for (const word of words) {\n    if (!word || word.trim().length < config.minQueryLength) continue;\n\n    const trimmedWord = word.trim();\n    if (processedWords.has(trimmedWord.toLowerCase())) continue;\n\n    processedWords.add(trimmedWord.toLowerCase());\n    index.base.push(trimmedWord);\n\n    // Process with each language processor\n    for (const processor of languageProcessors) {\n      processWordWithProcessor(trimmedWord, processor, index, config, featureSet);\n    }\n\n    processed++;\n    if (options.onProgress) {\n      options.onProgress(processed, words.length);\n    }\n  }\n\n  return index;\n}\n\n/**\n * Process a word with a specific language processor\n */\nfunction processWordWithProcessor(word: string, processor: LanguageProcessor, index: FuzzyIndex, config: FuzzyConfig, featureSet: Set<string>): void {\n  const normalized = processor.normalize(word);\n\n  // Add base word mapping\n  addToVariantMap(index.variantToBase, normalized, word);\n  addToVariantMap(index.variantToBase, word.toLowerCase(), word);\n  // Also add the original word as-is for exact matching\n  addToVariantMap(index.variantToBase, word, word);\n\n  // Generate and index variants\n  if (featureSet.has(\"partial-words\")) {\n    const variants = processor.getWordVariants(word);\n    variants.forEach((variant) => {\n      addToVariantMap(index.variantToBase, variant, word);\n    });\n  }\n\n  // Generate phonetic codes\n  if (featureSet.has(\"phonetic\") && processor.supportedFeatures.includes(\"phonetic\")) {\n    const phoneticCode = processor.getPhoneticCode(word);\n    if (phoneticCode) {\n      addToVariantMap(index.phoneticToBase, phoneticCode, word);\n    }\n  }\n\n  // Generate n-grams for partial matching\n  const ngrams = generateNgrams(normalized, config.ngramSize);\n  ngrams.forEach((ngram: string) => {\n    addToVariantMap(index.ngramIndex, ngram, word);\n  });\n\n  // Handle compound words\n  if (featureSet.has(\"compound\") && processor.supportedFeatures.includes(\"compound\")) {\n    const compoundParts = processor.splitCompoundWords(word);\n    compoundParts.forEach((part) => {\n      if (part !== word) {\n        addToVariantMap(index.variantToBase, processor.normalize(part), word);\n      }\n    });\n  }\n\n  // Add synonyms\n  if (featureSet.has(\"synonyms\")) {\n    const synonyms = processor.getSynonyms(normalized);\n    synonyms.forEach((synonym) => {\n      addToVariantMap(index.synonymMap, synonym, word);\n    });\n\n    // Add custom synonyms\n    if (config.customSynonyms) {\n      const customSynonyms = config.customSynonyms[normalized];\n      if (customSynonyms) {\n        customSynonyms.forEach((synonym) => {\n          addToVariantMap(index.synonymMap, synonym, word);\n        });\n      }\n    }\n  }\n}\n\n/**\n * Helper function to add mappings to variant maps\n */\nfunction addToVariantMap(map: Map<string, Set<string>>, key: string, value: string): void {\n  if (!map.has(key)) {\n    map.set(key, new Set());\n  }\n  map.get(key)!.add(value);\n}\n\n/**\n * Get fuzzy search suggestions from an index\n */\nexport function getSuggestions(index: FuzzyIndex, query: string, maxResults?: number, options: SearchOptions = {}): SuggestionResult[] {\n  const config = index.config;\n  const limit = maxResults || options.maxResults || config.maxResults;\n  const threshold = options.fuzzyThreshold || config.fuzzyThreshold;\n\n  if (!query || query.trim().length < config.minQueryLength) {\n    return [];\n  }\n\n  const matches = new Map<string, SearchMatch>();\n\n  // Get active language processors\n  const activeLanguages = options.languages || config.languages;\n  const processors = activeLanguages.map((lang) => index.languageProcessors.get(lang)).filter((p): p is LanguageProcessor => p !== undefined);\n\n  if (processors.length === 0) {\n    return [];\n  }\n\n  // Process query with each language processor\n  for (const processor of processors) {\n    const normalizedQuery = processor.normalize(query.trim());\n    \n    // Find matches using different strategies\n    findExactMatches(normalizedQuery, index, matches, processor.language);\n    findPrefixMatches(normalizedQuery, index, matches, processor.language);\n    findPhoneticMatches(normalizedQuery, processor, index, matches);\n    findSynonymMatches(normalizedQuery, index, matches);\n    findNgramMatches(normalizedQuery, index, matches, processor.language, config.ngramSize);\n    \n    if (config.features.includes('missing-letters') || \n        config.features.includes('extra-letters') ||\n        config.features.includes('transpositions')) {\n      findFuzzyMatches(normalizedQuery, index, matches, processor, config);\n    }\n  }\n\n  // Convert matches to results and rank them\n  const results = Array.from(matches.values())\n    .map((match) => createSuggestionResult(match, query, threshold))\n    .filter((result): result is SuggestionResult => result !== null)\n    .sort((a, b) => b.score - a.score)\n    .slice(0, limit);\n\n  return results;\n}\n\n/**\n * Find exact matches\n */\nfunction findExactMatches(query: string, index: FuzzyIndex, matches: Map<string, SearchMatch>, language: string): void {\n  // Check for exact matches in the variant map\n  const exactMatches = index.variantToBase.get(query);\n  if (exactMatches) {\n    exactMatches.forEach((word) => {\n      if (!matches.has(word)) {\n        matches.set(word, {\n          word,\n          normalized: query,\n          matchType: \"exact\",\n          editDistance: 0,\n          language,\n        });\n      }\n    });\n  }\n  \n  // Also check if the query exactly matches any base word (case-insensitive)\n  const queryLower = query.toLowerCase();\n  for (const baseWord of index.base) {\n    if (baseWord.toLowerCase() === queryLower) {\n      if (!matches.has(baseWord)) {\n        matches.set(baseWord, {\n          word: baseWord,\n          normalized: query,\n          matchType: \"exact\",\n          editDistance: 0,\n          language,\n        });\n      }\n    }\n  }\n}\n\n/**\n * Find prefix matches\n */\nfunction findPrefixMatches(query: string, index: FuzzyIndex, matches: Map<string, SearchMatch>, language: string): void {\n  for (const [variant, words] of index.variantToBase.entries()) {\n    if (variant.startsWith(query) && variant !== query) {\n      words.forEach((word) => {\n        if (!matches.has(word)) {\n          matches.set(word, {\n            word,\n            normalized: variant,\n            matchType: \"prefix\",\n            language,\n          });\n        }\n      });\n    }\n  }\n}\n\n/**\n * Find phonetic matches\n */\nfunction findPhoneticMatches(query: string, processor: LanguageProcessor, index: FuzzyIndex, matches: Map<string, SearchMatch>): void {\n  if (!processor.supportedFeatures.includes(\"phonetic\")) return;\n\n  const phoneticCode = processor.getPhoneticCode(query);\n  if (phoneticCode) {\n    const phoneticMatches = index.phoneticToBase.get(phoneticCode);\n    if (phoneticMatches) {\n      phoneticMatches.forEach((word) => {\n        if (!matches.has(word)) {\n          matches.set(word, {\n            word,\n            normalized: query,\n            matchType: \"phonetic\",\n            phoneticCode,\n            language: processor.language,\n          });\n        }\n      });\n    }\n  }\n}\n\n/**\n * Find synonym matches\n */\nfunction findSynonymMatches(query: string, index: FuzzyIndex, matches: Map<string, SearchMatch>): void {\n  const synonymMatches = index.synonymMap.get(query);\n  if (synonymMatches) {\n    synonymMatches.forEach((word) => {\n      if (!matches.has(word)) {\n        matches.set(word, {\n          word,\n          normalized: query,\n          matchType: \"synonym\",\n          language: \"synonym\",\n        });\n      }\n    });\n  }\n}\n\n/**\n * Find n-gram matches\n */\nfunction findNgramMatches(query: string, index: FuzzyIndex, matches: Map<string, SearchMatch>, language: string, ngramSize: number): void {\n  if (query.length < ngramSize) return;\n\n  const queryNgrams = generateNgrams(query, ngramSize);\n  const candidateWords = new Set<string>();\n\n  queryNgrams.forEach((ngram) => {\n    const ngramMatches = index.ngramIndex.get(ngram);\n    if (ngramMatches) {\n      ngramMatches.forEach((word) => candidateWords.add(word));\n    }\n  });\n\n  candidateWords.forEach((word) => {\n    if (!matches.has(word)) {\n      matches.set(word, {\n        word,\n        normalized: query,\n        matchType: \"ngram\",\n        language,\n      });\n    }\n  });\n}\n\n/**\n * Find fuzzy matches using edit distance\n */\nfunction findFuzzyMatches(query: string, index: FuzzyIndex, matches: Map<string, SearchMatch>, processor: LanguageProcessor, config: FuzzyConfig): void {\n  const maxDistance = config.maxEditDistance;\n\n  for (const [variant, words] of index.variantToBase.entries()) {\n    if (Math.abs(variant.length - query.length) <= maxDistance) {\n      const distance = calculateLevenshteinDistance(query, variant, maxDistance);\n\n      if (distance <= maxDistance) {\n        words.forEach((word) => {\n          const existingMatch = matches.get(word);\n          if (!existingMatch || (existingMatch.editDistance || Infinity) > distance) {\n            matches.set(word, {\n              word,\n              normalized: variant,\n              matchType: \"fuzzy\",\n              editDistance: distance,\n              language: processor.language,\n            });\n          }\n        });\n      }\n    }\n  }\n}\n\n/**\n * Create a suggestion result from a search match\n */\nfunction createSuggestionResult(\n  match: SearchMatch,\n  originalQuery: string,\n  threshold: number\n): SuggestionResult | null {\n  const score = calculateMatchScore(match, originalQuery);\n  \n  if (score < threshold) {\n    return null;\n  }\n\n  return {\n    display: match.word,\n    baseWord: match.word,\n    isSynonym: match.matchType === 'synonym',\n    score,\n    language: match.language,\n    // @ts-ignore - temporary debug property\n    _debug_matchType: match.matchType\n  };\n}\n\n/**\n * Calculate match score (0-1, higher is better)\n */\nfunction calculateMatchScore(match: SearchMatch, query: string): number {\n  const queryLen = query.length;\n  const wordLen = match.word.length;\n  const maxLen = Math.max(queryLen, wordLen);\n\n  let score = 0.5; // Base score\n\n  switch (match.matchType) {\n    case \"exact\":\n      score = 1.0;\n      break;\n    case \"prefix\":\n      score = 0.9 - (wordLen - queryLen) / (maxLen * 2);\n      break;\n    case \"substring\":\n      score = 0.8;\n      break;\n    case \"phonetic\":\n      score = 0.7;\n      break;\n    case \"fuzzy\":\n      if (match.editDistance !== undefined) {\n        score = Math.max(0.3, 1.0 - match.editDistance / maxLen);\n      }\n      break;\n    case \"synonym\":\n      score = 0.6;\n      break;\n    case \"compound\":\n      score = 0.75;\n      break;\n    case \"ngram\":\n      score = calculateNgramSimilarity(query.toLowerCase(), match.normalized, 3) * 0.8;\n      break;\n  }\n\n  // Boost score for shorter words (more likely to be what user wants)\n  // But don't boost exact matches - they should stay at 1.0\n  if (wordLen <= queryLen + 2 && match.matchType !== 'exact') {\n    score += 0.1;\n  }\n\n  return Math.min(1.0, Math.max(0.0, score));\n}\n\n/**\n * Generate n-grams from a string\n */\nfunction generateNgrams(str: string, n: number): string[] {\n  if (str.length < n) return [str];\n\n  const ngrams: string[] = [];\n  for (let i = 0; i <= str.length - n; i++) {\n    ngrams.push(str.slice(i, i + n));\n  }\n  return ngrams;\n}\n","/**\n * FuzzyFindJS - A powerful, multi-language optimized fuzzy search library\n *\n * @example\n * ```typescript\n * import { buildFuzzyIndex, getSuggestions } from 'fuzzyfindjs';\n *\n * const dictionary = ['Krankenhaus', 'Schule', 'Kindergarten'];\n * const index = buildFuzzyIndex(dictionary);\n * const results = getSuggestions(index, 'krankenh', 5);\n * ```\n */\n\n// Core functionality\nexport { buildFuzzyIndex, getSuggestions } from \"./core/index.js\";\nimport { buildFuzzyIndex, getSuggestions } from \"./core/index.js\";\n\n// Configuration\nexport { DEFAULT_CONFIG, PERFORMANCE_CONFIGS, mergeConfig } from \"./core/config.js\";\n\n// Types\nexport type { FuzzyIndex, FuzzyConfig, SuggestionResult, SearchMatch, MatchType, FuzzyFeature, LanguageProcessor, BuildIndexOptions, SearchOptions, DebugInfo, SuggestionResultWithDebug } from \"./core/types.js\";\n\n// Language processors\nexport { LanguageRegistry, GermanProcessor, EnglishProcessor, SpanishProcessor, FrenchProcessor, BaseLanguageProcessor } from \"./languages/index.js\";\n\n// Algorithms (for advanced users)\nexport { calculateLevenshteinDistance, calculateDamerauLevenshteinDistance, calculateNgramSimilarity, distanceToSimilarity, areStringsSimilar } from \"./algorithms/levenshtein.js\";\n\n/**\n * Quick start function with sensible defaults\n * Perfect for getting started quickly\n */\nexport function createFuzzySearch(\n  dictionary: string[],\n  options: {\n    languages?: string[];\n    performance?: \"fast\" | \"balanced\" | \"comprehensive\";\n    maxResults?: number;\n  } = {}\n) {\n  const index = buildFuzzyIndex(dictionary, {\n    config: {\n      languages: options.languages || [\"german\"],\n      performance: options.performance || \"balanced\",\n      maxResults: options.maxResults || 5,\n    },\n  });\n\n  return {\n    search: (query: string, maxResults?: number) => getSuggestions(index, query, maxResults),\n    index,\n  };\n}\n\n/**\n * Version information\n */\nexport const VERSION = \"1.0.2\";\n"],"names":["DEFAULT_CONFIG","PERFORMANCE_CONFIGS","LANGUAGE_FEATURES","mergeConfig","userConfig","baseConfig","performanceConfig","mergedConfig","recommendedFeatures","lang","feature","validateConfig","config","BaseLanguageProcessor","text","word","normalized","code","consonantMap","char","digit","variants","commonEndings","ending","_word","char1","char2","neighbors","n","ngrams","str1","str2","matrix","len1","len2","i","j","cost","GermanProcessor","prev","next","parts","commonPrefixes","commonSuffixes","commonWords","prefix","remainder","suffix","leftPart","rightPart","part","germanEndings","synonymMap","EnglishProcessor","metaphone","current","length","englishEndings","base","SpanishProcessor","FrenchProcessor","next2","LanguageRegistry","language","languages","processor","calculateLevenshteinDistance","maxDistance","previousRow","currentRow","minInRow","calculateDamerauLevenshteinDistance","maxLen","H","INF","charMap","lastMatchCol","lastMatchRow","result","calculateNgramSimilarity","ngrams1","generateNgrams","ngrams2","set1","set2","intersection","x","union","str","distanceToSimilarity","distance","maxLength","areStringsSimilar","threshold","buildFuzzyIndex","words","options","featureSet","languageProcessors","index","processedWords","processed","trimmedWord","processWordWithProcessor","addToVariantMap","variant","phoneticCode","ngram","synonym","customSynonyms","map","key","value","getSuggestions","query","maxResults","limit","matches","processors","p","normalizedQuery","findExactMatches","findPrefixMatches","findPhoneticMatches","findSynonymMatches","findNgramMatches","findFuzzyMatches","match","createSuggestionResult","a","b","exactMatches","queryLower","baseWord","phoneticMatches","synonymMatches","ngramSize","queryNgrams","candidateWords","ngramMatches","existingMatch","originalQuery","score","calculateMatchScore","queryLen","wordLen","createFuzzySearch","dictionary","VERSION"],"mappings":"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,EAEF,KAAM,CAEJ,YACA,WAAA,EAEF,IAAK,CAEH,YACA,UACA,YAAA,EAEF,QAAS,CAEP,WACA,UACA,UAAA,EAEF,QAAS,CAEP,SACA,UACA,MAAA,EAEF,OAAQ,CAEN,aACA,WACA,cAAA,CACF,EAGIpC,EAAa,KAAK,UAAUD,CAAI,EACtC,OAAOqC,EAAWpC,CAAU,GAAK,CAAA,CACnC,CAKU,sBAAiD,CACzD,MAAO,CACL,EAAG,CAED,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,GAAA,EAEF,EAAG,CAED,IACA,IACA,IACA,IACA,GA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"}